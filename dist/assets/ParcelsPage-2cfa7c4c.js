import{r as c,g as h,a as y,s as m,_ as p,u as C,b as T,j as o,c as j,d as R,e as v,l as ae,f as _,h as se,i as z,k as D,m as X,n as G,I as S,o as re,p as le,q as K,t as ne,P as ie,v as ce,w as L,S as de}from"./index-69088ad7.js";import{s as pe,a as ue}from"./useParcels-ceab1fbe.js";import{M as P,O as ge}from"./OrderForm-d6cf865c.js";import{D as fe}from"./DeliverForm-2ca6fc14.js";import{B as be,M as xe,a as ve}from"./LoadingButton-5be8ed4a.js";const he=c.createContext(),Q=he;function ye(e){return h("MuiTable",e)}y("MuiTable",["root","stickyHeader"]);const me=["className","component","padding","size","stickyHeader"],Ce=e=>{const{classes:t,stickyHeader:a}=e;return R({root:["root",a&&"stickyHeader"]},ye,t)},Te=m("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>p({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":p({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),q="table",je=c.forwardRef(function(t,a){const s=C({props:t,name:"MuiTable"}),{className:l,component:r=q,padding:n="normal",size:i="medium",stickyHeader:d=!1}=s,f=T(s,me),g=p({},s,{component:r,padding:n,size:i,stickyHeader:d}),x=Ce(g),$=c.useMemo(()=>({padding:n,size:i,stickyHeader:d}),[n,i,d]);return o.jsx(Q.Provider,{value:$,children:o.jsx(Te,p({as:r,role:r===q?null:"table",ref:a,className:j(x.root,l),ownerState:g},f))})}),Re=je,$e=c.createContext(),H=$e;function Me(e){return h("MuiTableBody",e)}y("MuiTableBody",["root"]);const ke=["className","component"],we=e=>{const{classes:t}=e;return R({root:["root"]},Me,t)},_e=m("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),He={variant:"body"},F="tbody",Pe=c.forwardRef(function(t,a){const s=C({props:t,name:"MuiTableBody"}),{className:l,component:r=F}=s,n=T(s,ke),i=p({},s,{component:r}),d=we(i);return o.jsx(H.Provider,{value:He,children:o.jsx(_e,p({className:j(d.root,l),as:r,ref:a,role:r===F?null:"rowgroup",ownerState:i},n))})}),Se=Pe;function ze(e){return h("MuiTableCell",e)}const De=y("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Ne=De,Be=["align","className","component","padding","scope","size","sortDirection","variant"],Ae=e=>{const{classes:t,variant:a,align:s,padding:l,size:r,stickyHeader:n}=e,i={root:["root",a,n&&"stickyHeader",s!=="inherit"&&`align${v(s)}`,l!=="normal"&&`padding${v(l)}`,`size${v(r)}`]};return R(i,ze,t)},Ue=m("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`size${v(a.size)}`],a.padding!=="normal"&&t[`padding${v(a.padding)}`],a.align!=="inherit"&&t[`align${v(a.align)}`],a.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>p({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?ae(_(e.palette.divider,1),.88):se(_(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},t.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},t.variant==="body"&&{color:(e.vars||e).palette.text.primary},t.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},t.size==="small"&&{padding:"6px 16px",[`&.${Ne.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},t.padding==="none"&&{padding:0},t.align==="left"&&{textAlign:"left"},t.align==="center"&&{textAlign:"center"},t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},t.align==="justify"&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),Oe=c.forwardRef(function(t,a){const s=C({props:t,name:"MuiTableCell"}),{align:l="inherit",className:r,component:n,padding:i,scope:d,size:f,sortDirection:g,variant:x}=s,$=T(s,Be),b=c.useContext(Q),k=c.useContext(H),U=k&&k.variant==="head";let M;n?M=n:M=U?"th":"td";let w=d;M==="td"?w=void 0:!w&&U&&(w="col");const O=x||k&&k.variant,I=p({},s,{align:l,component:M,padding:i||(b&&b.padding?b.padding:"normal"),size:f||(b&&b.size?b.size:"medium"),sortDirection:g,stickyHeader:O==="head"&&b&&b.stickyHeader,variant:O}),oe=Ae(I);let E=null;return g&&(E=g==="asc"?"ascending":"descending"),o.jsx(Ue,p({as:M,ref:a,className:j(oe.root,r),"aria-sort":E,scope:w,ownerState:I},$))}),u=Oe;function Ie(e){return h("MuiTableContainer",e)}y("MuiTableContainer",["root"]);const Ee=["className","component"],Le=e=>{const{classes:t}=e;return R({root:["root"]},Ie,t)},qe=m("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),Fe=c.forwardRef(function(t,a){const s=C({props:t,name:"MuiTableContainer"}),{className:l,component:r="div"}=s,n=T(s,Ee),i=p({},s,{component:r}),d=Le(i);return o.jsx(qe,p({ref:a,as:r,className:j(d.root,l),ownerState:i},n))}),Ve=Fe;function We(e){return h("MuiTableHead",e)}y("MuiTableHead",["root"]);const Je=["className","component"],Xe=e=>{const{classes:t}=e;return R({root:["root"]},We,t)},Ge=m("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),Ke={variant:"head"},V="thead",Qe=c.forwardRef(function(t,a){const s=C({props:t,name:"MuiTableHead"}),{className:l,component:r=V}=s,n=T(s,Je),i=p({},s,{component:r}),d=Xe(i);return o.jsx(H.Provider,{value:Ke,children:o.jsx(Ge,p({as:r,className:j(d.root,l),ref:a,role:r===V?null:"rowgroup",ownerState:i},n))})}),Ye=Qe;function Ze(e){return h("MuiTableRow",e)}const et=y("MuiTableRow",["root","selected","hover","head","footer"]),W=et,tt=["className","component","hover","selected"],ot=e=>{const{classes:t,selected:a,hover:s,head:l,footer:r}=e;return R({root:["root",a&&"selected",s&&"hover",l&&"head",r&&"footer"]},Ze,t)},at=m("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.head&&t.head,a.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${W.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${W.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:_(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:_(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),J="tr",st=c.forwardRef(function(t,a){const s=C({props:t,name:"MuiTableRow"}),{className:l,component:r=J,hover:n=!1,selected:i=!1}=s,d=T(s,tt),f=c.useContext(H),g=p({},s,{component:r,hover:n,selected:i,head:f&&f.variant==="head",footer:f&&f.variant==="footer"}),x=ot(g);return o.jsx(at,p({as:r,ref:a,className:j(x.root,l),role:r===J?null:"row",ownerState:g},d))}),Y=st,rt=(e,t)=>{switch(t){case"asc":return[...e].sort((a,s)=>Date.parse(a.date||"")-Date.parse(s.date||""));case"desc":return[...e].sort((a,s)=>Date.parse(s.date||"")-Date.parse(a.date||""));case"default":return[...e].sort((a,s)=>a.createdAt-s.createdAt);default:return e}};var N={},lt=D;Object.defineProperty(N,"__esModule",{value:!0});var Z=N.default=void 0,nt=lt(z()),it=o,ct=(0,nt.default)((0,it.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");Z=N.default=ct;var B={},dt=D;Object.defineProperty(B,"__esModule",{value:!0});var ee=B.default=void 0,pt=dt(z()),ut=o,gt=(0,pt.default)((0,ut.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");ee=B.default=gt;const ft=({data:e})=>{const{isLoggedIn:t,isRefreshing:a}=X(),[s,l]=c.useState(!1),r=G(),n=()=>{r(t&&!a?re(e._id):le(e._id))},{location:i,destination:d,type:f,description:g,date:x,parcelType:$}=e;return o.jsxs(o.Fragment,{children:[o.jsxs(Y,{sx:{"&:last-child td, &:last-child th":{border:0},backgroundColor:$==="deliver"?"#00000004":"initial"},children:[o.jsx(u,{align:"left",children:i}),o.jsx(u,{align:"left",children:d}),o.jsx(u,{align:"left",children:x||"-"}),o.jsx(u,{align:"left",children:f||"-"}),o.jsx(u,{align:"left",children:g||"-"}),o.jsxs(u,{align:"right",children:[o.jsx(S,{"aria-label":"edit parcel",type:"button",onClick:()=>l(!0),children:o.jsx(ee,{color:"primary"})}),o.jsx(S,{"aria-label":"delete parcel",onClick:n,children:o.jsx(Z,{color:"primary"})})]})]}),o.jsx(jt,{isOpen:s,setIsOpen:l,data:e})]})},bt=({list:e})=>o.jsx(Se,{children:e.map(t=>o.jsx(ft,{data:t},t._id))}),xt=({children:e})=>o.jsx(Ye,{children:o.jsxs(Y,{children:[o.jsx(u,{align:"left",children:"City from"}),o.jsx(u,{align:"left",children:"City to"}),o.jsx(u,{align:"left",children:"Date"}),o.jsx(u,{align:"left",children:"Type"}),o.jsx(u,{align:"left",children:"Description"}),o.jsx(u,{align:"right",children:e})]})}),vt=({setSortBy:e})=>{const[t,a]=c.useState(null),s=!!t,l=i=>{a(i.currentTarget)},r=i=>{e(i),n()},n=()=>{a(null)};return o.jsxs(o.Fragment,{children:[o.jsx(be,{"aria-controls":s?"sort-menu":void 0,"aria-haspopup":"true","aria-expanded":s?"true":void 0,onClick:l,children:"Sort By"}),o.jsxs(xe,{anchorEl:t,open:s,onClose:n,children:[o.jsx(P,{onClick:()=>r("asc"),children:"Ascending"}),o.jsx(P,{onClick:()=>r("desc"),children:"Descending"}),o.jsx(P,{onClick:()=>r("default"),children:"Default"})]})]})},ht=()=>{const{isLoggedIn:e,isRefreshing:t}=X(),[a,s]=c.useState("default"),l=K(pe),r=G(),n=c.useMemo(()=>rt(l,a),[l,a]);return c.useEffect(()=>{e&&!t&&r(ne())},[e,t,r]),l.length>0?o.jsx(Ve,{component:ie,children:o.jsxs(Re,{sx:{minWidth:650},"aria-label":"simple table",children:[o.jsx(xt,{children:o.jsx(vt,{setSortBy:s})}),o.jsx(bt,{list:n})]})}):o.jsx("p",{className:"text",children:"No parcels"})};var A={},yt=D;Object.defineProperty(A,"__esModule",{value:!0});var te=A.default=void 0,mt=yt(z()),Ct=o,Tt=(0,mt.default)((0,Ct.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");te=A.default=Tt;const jt=({isOpen:e,setIsOpen:t,data:a})=>{const s=document.querySelector("#modal-root");return ce.createPortal(o.jsx(ve,{open:e,onClose:()=>t(!1),children:o.jsxs("div",{className:L.modal,children:[o.jsx(S,{className:L.closeBtn,"aria-label":"close",onClick:()=>t(!1),children:o.jsx(te,{})}),a.parcelType==="order"?o.jsx(ge,{data:a,setIsOpen:t}):o.jsx(fe,{data:a,setIsOpen:t})]})}),s)};function _t(){const e=K(ue);return o.jsxs(o.Fragment,{children:[o.jsx(de,{isVisible:e}),o.jsx(ht,{})]})}export{_t as default};
