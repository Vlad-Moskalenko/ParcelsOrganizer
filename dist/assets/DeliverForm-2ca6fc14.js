import{x as b,n as y,m as E,y as j,j as n,z as C,A,B,C as D,D as L,R as m,E as P}from"./index-69088ad7.js";import{u as R}from"./useParcels-ceab1fbe.js";import{T as c,L as F}from"./LoadingButton-5be8ed4a.js";const k={location:"",destination:"",date:""},W=({data:r,setIsOpen:l})=>{const u=b(),i=y(),{isLoggedIn:h,isRefreshing:x}=E(),{isLoading:f}=R(),g=j({initialValues:r||k,validationSchema:A,onSubmit:o=>{if(r&&l){if(h){i(B({...o})).then(a=>{!(a!=null&&a.error)&&l(!1)});return}i(D({...o})),l(!1)}else{if(h&&!x){i(L({...o,parcelType:"deliver"})).then(a=>{!(a!=null&&a.error)&&u(m.REQUESTS)});return}i(P({...o,parcelType:"deliver",createdAt:Date.now()})),u(m.REQUESTS)}}}),{values:{location:p,destination:v,date:T},errors:e,touched:t,handleBlur:s,handleChange:d,handleSubmit:S}=g;return n.jsxs("form",{className:C.form,onSubmit:S,children:[n.jsx(c,{label:"From city",variant:"standard",fullWidth:!0,name:"location",value:p,onChange:d,onBlur:s,error:!!e.location&&!!t.location,helperText:e.location&&t.location?e.location:""}),n.jsx(c,{label:"City to",variant:"standard",fullWidth:!0,type:"text",name:"destination",value:v,onChange:d,onBlur:s,error:!!e.destination&&!!t.destination,helperText:e.destination&&t.destination?e.destination:""}),n.jsx(c,{label:"Date",variant:"standard",fullWidth:!0,type:"date",name:"date",value:T,onChange:d,onBlur:s,error:!!e.date&&!!t.date,helperText:e.date&&t.date?e.date:"",InputLabelProps:{shrink:!0}}),n.jsx(F,{loading:f,sx:{mt:"40px"},variant:"contained",type:"submit",children:r?"Submit changes":"Create deliver"})]})};export{W as D};
